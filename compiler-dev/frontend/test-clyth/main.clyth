#include "internal.fileio"; // can import internal modules
#include "otherFile.clyth"; // can import files

/**
 * Test program
 * @returns: int32 the return code
 */
 int32 main(string args[]) {
    // Optional garbage collector defined for entire scope:
    #register GarbageCollectorClass internal.tracingGC;

    string x1 = "somestring \n\n\tisverywacky \'\" string continues"
    int64 x = 10 // Default integer literal type is int64
    auto x2 = 0i32; // int32 cast
    ref<auto> y = &x // Pointers are automatically 64-bits unless type-overrided
    ref<int32> y2;
    y2 = &x2;
    const auto z = 100.00 // float64/double
    const auto i = 200.00f32 // overridden value type to float32

    int32[] sample_list; // Automatically allocated on the stack
    int64[200] sample_list; // Fixed-size list of 200 zeroed i64 elements
    int32[] sample_list = new int32[] // Allocated on the heap
    
    // The "numeric" type is a class wrapper that encompasses the int8-128, uint8-128, float32-64(double).
    auto[] sample_generic_list = []
    
    numeric:string sample_map = {
        1000: "something else",
    }

    numeric[] sample_set = (
        1, 2, 3, 3, 4, 5, 5, 10, 3000, 2000, 2000, 3000, 283494.0f32, 999920348.0f64
    )

    for (auto element in sample_set) {
        print("An element:", element)
    }
    
    for (auto index in sample_set.length) {
        print("An element:", sample_set[index])
    }

    for (auto i = 0; i < sample_set.length; i++) {
        print("An element:", sample_set[i])
    }

    // If this is a list or set, then the {} mapping will always correspond to index, value
    // And if it's a map, then the map's key-value pairs are iterated through instead.
    for (auto {index:element} in sample_set) {
        print("An element:", element, "At index:", index)
    }

    for (auto element in sample_set) {
        print("An element:", element)
    }

    // Optional semi-colons:
    print("This is a revised test Clyth program!");
    print(`Test formatted string ${x}`)

    {
        #register GarbageCollectorClass inherit; // Inherits GC scheme from parent scope (if there is one)
        {
            #register GarbageCollectorClass internal.ec; // optimized GC for Clyth (EC system)
            {
                // No register directive used here, thus manual memory management occurs in this scope.
            }
        }
    }
    return 0
 }